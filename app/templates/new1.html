<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Event Poster â€” 3D</title>
    <style>
        :root {
            --accent: #00e5ff;
            --accent-2: #7c4dff;
            --surface: #080a14;
            --text-on-accent: #0b0d16;
        }

        html, body { height: 100%; margin: 0; }
        body {
            background: radial-gradient(120% 120% at 50% -10%, #0f1230 0%, #090b16 60%, #070911 100%);
            color: #e7eaf4;
            font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial;
        }

        .page { min-height: 100%; display: grid; place-items: center; padding: 22px 14px; }

        /* 3D card container */
        .scene { perspective: 1200px; width: min(92vw, 980px); }

        .card-3d {
            position: relative;
            border-radius: 18px;
            overflow: hidden;
            transform-style: preserve-3d;
            transition: transform .18s ease, box-shadow .18s ease;
            box-shadow: 0 18px 50px rgba(0,0,0,.5);
            background: #0e1022;
        }

        .card-3d img {
            display: block;
            width: 100%;
            height: auto;
            pointer-events: none;
        }

        /* subtle glow overlay */
        .card-3d::before {
            content: "";
            position: absolute;
            inset: 0;
            background: radial-gradient(80% 60% at 50% 10%, rgba(124,77,255,.25), rgba(0,229,255,.18) 40%, rgba(0,0,0,0) 70%);
            mix-blend-mode: screen;
            pointer-events: none;
        }

        /* 3D CTA button */
        .cta-wrap {
            position: absolute;
            left: 0; right: 0;
            bottom: max(14px, env(safe-area-inset-bottom));
            display: flex;
            justify-content: center;
            padding: 0 16px;
            pointer-events: none;
        }

        .cta-3d {
            pointer-events: auto;
            position: relative;
            display: inline-flex; align-items: center; justify-content: center;
            padding: 16px 28px; width: clamp(200px, 70vw, 420px);
            border-radius: 14px; text-transform: uppercase; font-weight: 800; letter-spacing: .4px;
            text-decoration: none; color: var(--text-on-accent);
            background: linear-gradient(135deg, var(--accent), var(--accent-2));
            box-shadow: 0 14px 24px rgba(0, 229, 255, .2), 0 6px 12px rgba(124, 77, 255, .25), 0 2px 0 rgba(255,255,255,.4) inset, 0 -2px 0 rgba(0,0,0,.25) inset;
            transform: translateZ(30px);
            transition: transform .18s cubic-bezier(.2,.8,.2,1), box-shadow .18s ease;
        }

        .cta-3d::after {
            content: "";
            position: absolute; left: 0; right: 0; bottom: -10px; height: 14px;
            border-radius: 18px; filter: blur(10px);
            background: linear-gradient(90deg, rgba(0,229,255,.45), rgba(124,77,255,.45));
            opacity: .85; transform: translateZ(-16px) scale(.92);
        }

        .cta-3d:active { transform: translateZ(24px) translateY(2px); }

        .hint { text-align:center; opacity:.75; font-size: 14px; margin-top: 14px; }

        @media (min-width: 640px) {
            .page { padding: 34px 28px; }
        }
    </style>
    <link rel="preload" as="image" href="{{ url_for('static', filename='BATTLEGROUND.jpg') }}">
</head>
<body>
    <div class="page">
        <div class="scene" id="scene">
            <figure class="card-3d" id="card" aria-label="3D Event Visual">
                <img src="{{ url_for('static', filename='BATTLEGROUND.jpg') }}" alt="Futuristic tech portal blue neon">
                <div class="cta-wrap">
                    <a class="cta-3d" href="{{ url_for('main.register') }}" aria-label="Register for TECH-MANTHAN">
                        Register Now
                    </a>
                </div>
            </figure>
        </div>
        <p class="hint">Tip: Move your mouse or tilt your phone to feel the 3D effect.</p>
    </div>

    <script>
        (function() {
            const scene = document.getElementById('scene');
            const card = document.getElementById('card');
            const maxTilt = 8; // degrees

            function setTransform(xRatio, yRatio) {
                const rotateY = (xRatio - 0.5) * (maxTilt * 2);
                const rotateX = (0.5 - yRatio) * (maxTilt * 2);
                card.style.transform = `rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;
            }

            function resetTransform() {
                card.style.transform = 'rotateX(0deg) rotateY(0deg)';
            }

            // Pointer/mouse move
            scene.addEventListener('pointermove', (e) => {
                const rect = scene.getBoundingClientRect();
                const xRatio = (e.clientX - rect.left) / rect.width;
                const yRatio = (e.clientY - rect.top) / rect.height;
                setTransform(xRatio, yRatio);
            });
            scene.addEventListener('pointerleave', resetTransform);

            // Device orientation (mobile)
            function onOrientation(e) {
                const gamma = e.gamma || 0; // left-right, range ~[-45,45]
                const beta = e.beta || 0;   // front-back, range ~[-45,45]
                const xRatio = (gamma + 45) / 90; // normalize to 0..1
                const yRatio = (beta + 45) / 90;  // normalize to 0..1
                setTransform(xRatio, yRatio);
            }

            if (window.DeviceOrientationEvent && typeof DeviceOrientationEvent.requestPermission === 'function') {
                // iOS requires a click to allow motion
                document.addEventListener('click', function once() {
                    DeviceOrientationEvent.requestPermission().then((state) => {
                        if (state === 'granted') {
                            window.addEventListener('deviceorientation', onOrientation);
                        }
                    }).catch(() => {});
                    document.removeEventListener('click', once);
                });
            } else if (window.DeviceOrientationEvent) {
                window.addEventListener('deviceorientation', onOrientation);
            }
        })();
    </script>
</body>
</html>
